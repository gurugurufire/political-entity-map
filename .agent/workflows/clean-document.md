---
description: PDFやコピペで崩れたドキュメントを整理されたMarkdown形式に整形する手順
---

# /clean-document ワークフロー

PDFからの変換やコピペでレイアウトが崩れたドキュメントを、人間が読みやすく、AIが理解しやすい綺麗なMarkdown形式に整形します。

## 📋 事前準備
1. 対象のドキュメント（整形前）のファイルパスを確認します。
2. バックアップとして原本を保持していることを確認します。

## 🛠️ 手順

### 1. 現状把握
`view_file` でファイルを読み込み、以下の項目をチェックします。
- [ ] 目次の有無とフォーマット
- [ ] 見出し階層（#の数）の乱れ
- [ ] 表が崩れていないか（プレーンテキスト化など）
- [ ] コードブロックが途中で切れていないか
- [ ] PDFのヘッダー/フッター（ページ番号、コピーライト等）の混入

### 2. 整形ルールの決定
ドキュメントの性質（API仕様書、操作マニュアル、要件定義書など）に合わせて、見出しの深さや必須セクションを決定します。

### 3. 整形作業（自動/手動）
以下の優先順位で整形を実施します。

#### 3.1 メタ情報と目次の整備
- 文頭に `# タイトル` を配置。
- 改訂履歴を引用ブロック（`> **改訂**: ...`）で記載。
- `## 目次` を作成し、アンカーリンク（`[名](#リンク)`）を付与。

#### 3.2 表のMarkdown化
崩れたテキストを `|` を使ったMarkdownテーブル形式に再構成します。特にカラム（列）の対応に注意します。

#### 3.3 コードブロックの結合
JSON等のコードが複数ブロックに分断されている場合、一つの ` ``` ` ブロックに統合し、インデントを整えます。

#### 3.4 見出し階層の統一
- ドキュメントタイトル: `#` (h1)
- 大項目（章）: `##` (h2)
- 中項目（節）: `###` (h3)
- 小項目（項）: `####` (h4)
大項目の前にはセクション区切り（`---`）を挿入します。

### 4. 最終チェック
- [ ] 全てのコードブロックが閉じているか。
- [ ] 目次のリンクが正しく機能するか。
- [ ] 表の崩れがないか。
- [ ] 重複セクションが統合されているか。

## 💡 Claudeへの指示例
「`/clean-document` を実行して、[パス] のドキュメントを整形してください。特にAPI仕様書の形式に合わせて、パラメータ表を綺麗に整えてください。」
